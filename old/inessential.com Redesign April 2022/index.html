<!DOCTYPE html>
<html>
<head>
	<title>inessential: weblog</title>
	<meta name=viewport content=width=device-width />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link rel=stylesheet type=text/css href=styles14.css />
	<link rel=alternate type=application/rss+xml title=RSS href=https://inessential.com/xml/rss.xml />
	<link rel=alternate type=application/json title="inessential.com feed" href=https://inessential.com/feed.json />
</head>
<body>

<header>
	<span id=biglink><a href=https://inessential.com/>inessential</a></span>
	<span id=bigbyline>by Brent Simmons</span>
</header>

<main>
<div class="innertext">

<article class=post>
	<div class=postDateline><a href=https://inessential.com/2022/01/04/1942_letter_to_my_grandfather_from_his_father>04 Jan 2022</a></div>	
	<h2><a href=https://inessential.com/2022/01/04/1942_letter_to_my_grandfather_from_his_father>1942 Letter to My Grandfather from His Father</a></h2>
	<div class=postBody><p>My Dad ran across a remarkable letter and shared it with family. I volunteered to share it more widely, and Dad and his siblings agreed.</p>

<p style="text-align:center">* * *</p>

<p>This 1942 letter was written by John Simmons to his son Donald as Donald was about to be shipped to Europe (England first). He had enlisted after the Pearl Harbor attack.</p>

<p>Donald Simmons was my grandfather, and I had the fortune of knowing him.</p>

<p>My father and his siblings knew John Simmons, their grandfather, and with this letter they are able to know him a bit better.</p>

<p>John was 63 when he wrote this letter to his youngest son.</p>

<p style="text-align:center">* * *</p>

<p>You can read all <a href="https://inessential.com/images/ww2-letter.pdf">three pages together as a PDF</a> â€” or you can click a thumbnail for each page for the full size version.</p>

<p><a href="https://inessential.com/images/ww2-letter-page1.jpg"><img src="https://inessential.com/images/ww2-letter-page1-thumb.png" height="128" width="128" /></a><br />
Page 1</p>

<p><a href="https://inessential.com/images/ww2-letter-page2.jpg"><img src="https://inessential.com/images/ww2-letter-page2-thumb.png" height="128" width="128" /></a><br />
Page 2</p>

<p><a href="https://inessential.com/images/ww2-letter-page3.jpg"><img src="https://inessential.com/images/ww2-letter-page3-thumb.png" height="128" width="128" /></a><br />
Page 3</p>

<p style="text-align:center">* * *</p>

<p>Below is the text. The original is written in cursive on Wright Aeronautical Corporation letterhead.</p>

<blockquote>
  <p>Aug. 20, 1942</p>

  <p>Dear Don:</p>

  <p>My thoughts are with you tonight so strongly that I shall drop you a note. Of course it is hard for you to go but not much harder than for us to see you go. You see we love you and are now so helpless to aid you in any way. But then you are a man now and will have to make your own way from here on. And weâ€™re sure that you have the stuff to do it. It wonâ€™t be an easy job but then, Don, no job worth the doing is. There are bound to be dark days and darker nights but you must always remember that nothing lasts forever and in the morning it will be a new day. And you are better trained than most for the work.</p>

  <p>You are too intelligent to be told and believe that war is anything but a tragic mess, however, we are in this not with our consent but because of a treacherous attack that we did not invite. Regardless of the causes the effect is that we simply must win. And we shall win in spite of our petty bickerings among ourselves for in the final analysis <u>we are</u> the greatest nation on earth. We know that this country has reached the highest degree of living for its people ever attained by any nation in the history of the world and I believe enough in God to feel that with His help all the good, the right, and the fine things must survive. Of course we feel that possibly you may not come back â€”Â there is always that possibility and, too, we may be gone when you do come back but in the very grim business of war bombs and bullets go where they are sent and we must for our own peace of mind look that fact in face. Naturally the law of averages is greatly on the side of your returning to us and please God that will be our happiest day in a life time. I am confident you will receive very good training in whatever field you are placed and that you will be adequately prepared to protect yourself.</p>

  <p>You are entering what will probably be the greatest adventure in your life. You are going to see miserable, filthy, low, mean and degrading sights for men are like that but you will also see fine, good, self sacrificing and even heroic things for men are like that also. That you will fall into the later class we who love you and have every confidence in you have not the slightest doubt. You have the background and the spirit and will to do so. Just keep yourself so you can look yourself in the face and not be ashamed of what you see. You will come through all right.</p>

  <p>And now, old Son, Iâ€™ll close by wishing you again the best of everything there is in any old world and all the luck that there is. I truly wish I were going with you â€”Â it is hard too to stand and wait.</p>

  <p>John</p>
</blockquote>

<p>Sgt. Donald Simmons did, of course, make it back.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/10/04/in_case_i_dont_write_here_again>04 Oct 2021</a></div>	
	<h2><a href=https://inessential.com/2021/10/04/in_case_i_dont_write_here_again>In Case I Donâ€™t Write Here Again</a></h2>
	<div class=postBody><p>This blog is almost 22 years old, and in all that time Iâ€™ve been solid about posting regularly â€” until this recent dry spell.</p>

<p>I skipped the summer. Last post was in June. There was just one that month, and just one in May.</p>

<p>I have an explanation: while my health and physical circumstances are unchanged and, happily, fine, I have not felt the drive to write here that I always felt.</p>

<p>I never, in all these years, had to push myself. Iâ€™d get an idea and I would be compelled to write it up and publish it. It was always that simple.</p>

<p>But I havenâ€™t felt that way in many months, and Iâ€™m not sure I will again.</p>

<p>Maybe this is temporary, and there will be hundreds more posts to come.</p>

<p>But I kind of think not, because thereâ€™s a bigger issue: I expect and hope that eventually I will no longer be a public person â€” no blog, no Twitter, no public online presence at all.</p>

<p>I have no plan. Iâ€™m feeling my way to that destination, which is years off, surely, and I just hope to manage it gracefully. (I donâ€™t know of any role models with this.)</p>

<p>Anyway. In case I donâ€™t write here again â€”Â in case these are the last words of this blogÂ â€”Â <em>thank you.</em> I loved writing here, and you are why.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/06/20/nnw_6_ios_coming>20 Jun 2021</a></div>	
	<h2><a href=https://inessential.com/2021/06/20/nnw_6_ios_coming>NetNewsWire 6 for iOS Waiting for Review</a></h2>
	<div class=postBody><p>NetNewsWire 6 for iOS â€”Â which includes new features iCloud syncing, home screen widgets, and a bunch more â€”Â was submitted to App Store review today. The team is super-psyched to get this release shipping!</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/05/07/what_it_was_like_to_sell_apps_online_in_2003>07 May 2021</a></div>	
	<h2><a href=https://inessential.com/2021/05/07/what_it_was_like_to_sell_apps_online_in_2003>What It Was Like to Sell Apps Online in 2003</a></h2>
	<div class=postBody><p>Apple likes to claim that the App Store replaced the system of selling software in physical boxes in stores and over the mail.</p>

<p>But itâ€™s not true.</p>

<p>My experience selling apps before the App Store was not unique or new â€” itâ€™s only interesting now because people may have forgotten this history, and younger people may never have heard it.</p>

<p>Hereâ€™s my story:</p>

<p>We shipped NetNewsWire 1.0, an RSS reader for Mac OS X, in 2003 and sold it over the web for $39.95. There were no boxes and no printed manuals â€” there was nothing physical at all. This situation was, at that time, completely unremarkable: it was expected.</p>

<p>We used a service called Kagi for the storefront and credit card processing. Kagi had been around since the â€™90s, and it was well-known and trusted by the Mac community. Setting up our account and store was pretty simpleÂ â€” simple enough that I forget most of the details.</p>

<p>Part of how it worked was that we had to upload a text file to Kagiâ€™s system, a file with license keys their system would give out one by one. I wrote a script to generate that file, and I wrote code in the app to validate a license key. I also had to create a small window where a user would enter their license code.</p>

<p>This meant there was some work, yes, but it was nothing compared to what you have to do to sell on the App Store.</p>

<p>(It could have been more convenient for purchasers, yes, and by 2005 we had plans to create an in-app purchasing system that still used Kagi, but we ended up benching that plan, for reasons.)</p>

<p>And â€”Â importantly â€”Â Kagiâ€™s fee was something like 5%. (<i>Update a little later:</i> evidence suggests I may be misremembering: it could have been more like 10%.)</p>

<p><em>Even more importantly</em>: Kagi didnâ€™t review our app. I suppose, if we had been selling something egregious in some way, they might have learned of it and cut us off. But thatâ€™s a standard business relationship. Kagi was not a gatekeeper.</p>

<p>Kagi didnâ€™t promote our app, either. It wasnâ€™t their job â€”Â it was ours. They provided a storefront and trusted credit card handling, and that was all we wanted, and it was great.</p>

<p>By 2005 this Mac app was making well into five figures per month. Still at Kagi.</p>

<p>Hereâ€™s the thing: <em>none of this was new</em>. We were following well-worn paths. When I worked at UserLand Software, before writing NetNewsWire, we sold Frontier on the web. Lots of other companies â€”Â and not just indies â€”Â had been selling apps on the web since the â€™90s, and paying more like 5% than 30%, and not having to go through any gatekeepers.</p>

<p>And it was pretty easy. Easier than dealing with the App Store!</p>

<p>Next time you hear someone from Apple forget this history, please remember that theyâ€™re forgetting on purpose.</p>

<p>PS Yes, you may argue the App Storeâ€™s superiority in certain respects and be correct. Donâ€™t bother. My point is that the App Store was not replacing the system of apps-in-boxes-in-stores. It was replacing the system I talk about above.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/04/27/running_with_colors>27 Apr 2021</a></div>	
	<h2><a href=https://inessential.com/2021/04/27/running_with_colors>Running with Colors</a></h2>
	<div class=postBody><p>The <a href="https://www.washingtonpost.com/health/2021/04/27/cdc-guidance-masks-outdoors/">new CDC guidance</a> says that unvaccinated people can â€œWalk, run or bike outdoors with members of your householdâ€ without a mask â€” which I take to mean that I, a currently half-vaxed person, can go for a jog by myself and leave the mask at home.</p>

<p>I actually <em>have</em> been jogging without a mask this whole pandemic â€”Â but only after dark, when the streets are nearly empty, when I have plenty of room to maneuver around the dog minders.</p>

<p>And so my next run â€” scheduled for tomorrow â€”Â will be a daylight run. Iâ€™m so looking forward to it! Getting back to normal one delight at a time. ğŸ¸</p>

<p>PS Lots of rabbits in our neighborhood these days. (Technically: smolbrownbois.) Rabbits are really dumb in one specific way: when they see me running, they run away from me â€”Â by running in the exact same direction Iâ€™m running! They could go 90Â° â€”Â and they eventually do â€” but they take a while to figure it out, and they donâ€™t seem to remember between runs.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/04/07/the_lack_of_a_price_tag_seems_almost_criminal>07 Apr 2021</a></div>	
	<h2><a href=https://inessential.com/2021/04/07/the_lack_of_a_price_tag_seems_almost_criminal>The lack of a price tag seems almost criminal</a></h2>
	<div class=postBody><p>It was really cool to see NetNewsWire in <a href="https://www.gq-magazine.co.uk/gallery/best-iphone-ipad-apps">British GQâ€™s list of top iOS apps</a> â€”Â and awesome to be in the company of Fantastical  (<a href="https://twitter.com/macguitar">cousin Michael</a>â€™s app), Widgetsmith, Linea Sketch, Halide, Overcast, and other great apps.</p>

<p>One part stood out to me, though: the blurb ends with â€œThe lack of a price tag seems almost criminalâ€ â€”Â and this isnâ€™t the first time price has been brought up. Often the sentiment is something like â€œIâ€™m surprised how good this app is, given that itâ€™s free.â€</p>

<p>I should explain: the app is better â€”Â <em>much</em> better â€” than it would be if it were a for-pay app. If it were a for-pay app, it would be just me working on it instead of this great team of volunteers. There probably wouldnâ€™t be an iOS version at all: it would be Mac-only. The kind of features I donâ€™t enjoy doing, such as the Twitter and Reddit integration (and others), wouldnâ€™t even exist.</p>

<p>And it would be slow going. NetNewsWire 5 would have shipped much later than it did, and NetNewsWire 6 would not have shipped until next year, probably.</p>

<p>Instead, because itâ€™s open source, we have this amazing team of people willing to work on it in their spare time. During a pandemic and everything. Theyâ€™re bringing you something great out of <a href="https://inessential.com/2015/06/30/love">love</a>, with the goal of writing an app of the highest quality.</p>

<p>We donâ€™t have to rush and Ship Right Now in order to make our revenue numbers. We donâ€™t have to pick feature X over feature Y because we think it will bring in more conversions. We can care about performance and efficiency; we can say no to things that might have made money but that are outside our vision.</p>

<p>Thereâ€™s nothing wrong with commercial software â€”Â NetNewsWire was commercial software for many, many years â€”Â but itâ€™s also a great freedom to us that itâ€™s <em>not</em>. And it allows us to make something much greater than I would have made all on my own.</p>

<p>(Why all on my own? Because, these days, a Mac and iOS RSS reader is not going to bring in enough revenue to pay for a team greater than one. And even paying one full salary plus health insurance would have been a hell of a longshot.)</p>

<p>PS Hereâ€™s <a href="https://github.com/Ranchero-Software/NetNewsWire/blob/main/Technotes/HowToSupportNetNewsWire.markdown">how to support NetNewsWire</a>. (Donâ€™t send money!)</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/04/06/im_still_living_with_the_longterm_effects_of_a_disease_that_now_has_a_vaccine>06 Apr 2021</a></div>	
	<h2><a href=https://inessential.com/2021/04/06/im_still_living_with_the_longterm_effects_of_a_disease_that_now_has_a_vaccine>Iâ€™m Still Living with the Longterm Effects of a Disease that Now Has a Vaccine</a></h2>
	<div class=postBody><p>I was in third grade when I got a severe case of chicken pox. This was in the days before there was a vaccine for it. When I returned to school, I found I couldnâ€™t read the blackboard anymore, and I had to get glasses.</p>

<p>My eyesight kept getting worse in the years since, and itâ€™s the worst that I know of among friends and family. With my contacts out, I canâ€™t see my feet. I could trip over anything on the floor because I canâ€™t actually see that far away.</p>

<p>I wear contacts instead of glasses because of the lack of peripheral vision. (These days I wear contacts <em>and</em> reading glasses when Iâ€™m at my computer or reading.)</p>

<p>I wish there had been a vaccine! I would have gladly had the better life with only normally impaired vision instead of extremely impaired.</p>

<h4 id="let-me-tell-you-how-it-was-almost-worse-though">Let me tell you how it was almost worse, though</h4>

<p>We lived at the bottom of a quarter-mile-long hill. When it snowed, everyone parked their cars at the top of the hill, next to the highway.</p>

<p>I donâ€™t remember the blizzard of â€™78 at all because thatâ€™s when I had chicken pox. I had it so bad that it wasnâ€™t just on my outside: it was inside. Eventually I couldnâ€™t keep anything down â€”Â even the smallest sip of water would make me throw up.</p>

<p>But could I go to the hospital? My parents would have had to bundle me up, put me on a sled, and pull me up that hill, in the cold wind, with the road covered in deep snow, to get me to the car, to get me to the hospital. Would I have survived the trip? Unknown. I was weak and severely dehydrated. (Iâ€™ve never been as sick since. Not nearly.)</p>

<p>Long story short â€”Â we didnâ€™t have to attempt the trip once I was able to hold down some cherry Jello. ğŸ£</p>

<p>But was this all better than getting a vaccine would have been? I could have died, and Iâ€™m <em>still</em> living with the effects. In a heartbeat Iâ€™d swap that experience for having had the vaccine.</p>

<p>When itâ€™s your turn â€” itâ€™ll be mine in a couple weeks â€” get the coronavirus vaccine! Donâ€™t let this thing kill you or fuck you up forever.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/04/06/the_perfect_to_do_system_is_not_just_around_the_corner>06 Apr 2021</a></div>	
	<h2><a href=https://inessential.com/2021/04/06/the_perfect_to_do_system_is_not_just_around_the_corner>The Perfect To-Do System Is Not Just Around the Corner</a></h2>
	<div class=postBody><p>Sometimes itâ€™s as if you can almost sense its nearness â€” that perfect to-do system, built on OmniFocus, Things, Asana, Todoist, or one of the many others. Itâ€™ll take just a little more thinking and tweaking. Rationalize your tagging system, change how you think about due dates, maybe write some scripts or create more templates, and youâ€™ll have it.</p>

<p>And it will be so glorious! And youâ€™ll never have to deal with this again. (You swear youâ€™re not one of those people who futz with their to-do thing just because itâ€™s fun.)</p>

<h4 id="but-nope">But Nope</h4>

<p>Hereâ€™s what you need to know: itâ€™s a mirage.</p>

<p>I know, I know. How can that be, when it feels so damn near? Weâ€™re just talking about lists and a few ways â€” time and tags, for instance â€”Â of slicing them up. I know perfection is right here. Give me another day! Iâ€™ve so got this!</p>

<p>But itâ€™s not around the corner. Itâ€™s really not. Thereâ€™s no perfect system for anybody. All of these apps are pretty good, and you may find one fits you better than another, but youâ€™re not ever going to make it the perfect system for you. Even if you started from scratch and wrote your own, youâ€™re not getting the perfect system.</p>

<p>Thereâ€™s no getting out of this fact: these apps are <em>all</em> going to take more constant input from you than youâ€™d wish for. They donâ€™t take away the need for some amount of self-discipline to use them effectively.</p>

<p>Iâ€™m so very, very sorry.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/03/27/netnewswire_6_0_for_mac>27 Mar 2021</a></div>	
	<h2><a href=https://inessential.com/2021/03/27/netnewswire_6_0_for_mac>NetNewsWire 6.0 for Mac</a></h2>
	<div class=postBody><p>NetNewsWire 6.0 for Mac has shipped! <a href="https://nnw.ranchero.com/2021/03/27/netnewswire-for-mac.html">See the blog post</a> for a download link and list of changes.</p>

<p>The team of volunteers has done wonderful work â€”Â during multiple crises, including a pandemic â€” and produced one of the great NetNewsWire releases. Their reward is hearing that you love the app. ğŸ£ğŸ¥ğŸ¸</p>

<p>Next up for the team: weâ€™re working on NetNewsWire 6 for iOS. The good news is that most of the code is shared between Mac and iOS â€” for instance, the iCloud syncing code is the same, and weâ€™ve got this ship-worthy. But we still need to test and fix bugs. Weâ€™ll make an announcement on the <a href="https://nnw.ranchero.com/">NetNewsWire blog</a> once weâ€™re doing TestFlight builds.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/03/23/netnewswire_6_0b4_is_a_final_candidate_r>23 Mar 2021</a></div>	
	<h2><a href=https://inessential.com/2021/03/23/netnewswire_6_0b4_is_a_final_candidate_r>NetNewsWire 6.0b4 Is a Final Candidate Release</a></h2>
	<div class=postBody><p>We believe weâ€™re very close to shipping NetNewsWire 6.0 for Mac. <a href="https://nnw.ranchero.com/2021/03/23/netnewswire-b-for.html">Get the latest beta here!</a></p>

<p>After we ship the Mac version, weâ€™ll get to work on the iOS version. No ETAs on TestFlight builds, but that will be our next step.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/03/21/benefits_of_netnewswires_threading_model>21 Mar 2021</a></div>	
	<h2><a href=https://inessential.com/2021/03/21/benefits_of_netnewswires_threading_model>Benefits of NetNewsWireâ€™s Threading Model</a></h2>
	<div class=postBody><p>In my previous post I describe <a href="https://inessential.com/2021/03/20/how_netnewswire_handles_threading">how NetNewsWire handles threading</a>, and I touch on some of the benefits â€”Â but I want to be more explicit about them.</p>

<h4 id="it-reduces-bugs-and-makes-the-app-stable">It Reduces Bugs and Makes the App Stable</h4>

<p>I would not be surprised, were it possible to know, that the largest trigger for bugs and crashing bugs (among iOS and Mac apps) is threading issues of various kinds.</p>

<p>Our threading model eliminates this category.</p>

<p>We have zero known threading bugs or crashes in production, and theyâ€™re extremely rare in development. When they appear in development theyâ€™re due to a mistake in following the model. (Something like forgetting to dispatch to the main queue when calling a callback, for instance.) Theyâ€™re quickly and easily fixed.</p>

<h4 id="it-makes-the-app-faster-and-more-efficient">It Makes the App Faster and More Efficient</h4>

<p>The app does not suffer from thread explosion, which is bad for performance. Ever stop your app in the debugger and notice that it has dozens of threads? Or maybe notice that in a crash log? Not an issue for NetNewsWire.</p>

<p>But, more importantly, we donâ€™t hide performance and efficiency issues by moving work to a background queue. Instead, we use the profiler in Instruments to figure out whatâ€™s slow, and then we fix it. Only after doing that would we consider moving work to a background queue.</p>

<h4 id="it-saves-developer-time">It Saves Developer Time</h4>

<p>Things NetNewsWire developers donâ€™t have to do:</p>

<ul>
  <li>Diagnose and fix threading bugs and crashes â€” which are often excruciating-to-impossible to reproduce and difficult to fix</li>
  <li>Think about how to do background work (thereâ€™s a simple model for how to do it)</li>
  <li>Figure out how to protect shared mutable state</li>
</ul>

<p>This gives us more time â€”Â which is super-valuable in an open-source, all-volunteer project â€” to do work that improves the lives of the people who use the app.</p>

<p>It also improves the experience of our developers, who can concentrate on the feature theyâ€™re working on instead of on how the feature can live safely in a multithreaded universe.</p>

<p>Best of all: nobody is spending time tracking down a maddening threading bug that never happens on their machine, and then implementing a speculative fix â€” only to find later that itâ€™s <em>not</em> the fix but now, actually, thereâ€™s a new crashing bug, which might have been triggered by that â€œfixâ€â€¦ and so on, forever.</p>

<p>Developer morale is important!</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/03/20/how_netnewswire_handles_threading>20 Mar 2021</a></div>	
	<h2><a href=https://inessential.com/2021/03/20/how_netnewswire_handles_threading>How NetNewsWire Handles Threading</a></h2>
	<div class=postBody><p>NetNewsWire is mostly <em>not</em> multi-threaded. Hereâ€™s what we do:</p>

<h4 id="run-most-code-on-the-main-thread">Run Most Code on the Main Thread</h4>

<p>The default place for <em>all</em> of our code â€”Â UI code and otherwise â€”Â is the main thread. Synchronous code running on the main thread is the easiest code to reason about and is the least likely to trigger weird, intermittent bugs.</p>

<p>In other words: we try, as much as possible, to not use queues or threading at all. I canâ€™t emphasize this enough: the <em>best way to handle concurrency is just to not do it</em>.</p>

<h4 id="communicate-between-components-on-the-main-thread">Communicate Between Components on the Main Thread</h4>

<p>Every notification and every callback happens on the main thread.</p>

<p>Though a given object (or small system) may use a serial queue internally, it never, ever lets that fact leak out beyond its own boundaries.</p>

<h4 id="use-serial-queues-for-pure-functions-that-take-time">Use Serial Queues for Pure Functions That Take Time</h4>

<p>Parsing an RSS feed is a pure function. Since it does take some time (though less than you think), it can be done on a serial queue, in the background. The result is returned via callback on the main thread (see above).</p>

<p>These kinds of things are great for background processing because theyâ€™re perfectly isolatable â€”Â parsing a feed affects no state. It doesnâ€™t do any notifications. All it does is callback, once done, with an object.</p>

<p>There are other examples (decoding JSON or image data) that are great for this, and which we handle the same way.</p>

<h4 id="use-serial-queues-for-database-access">Use Serial Queues for Database Access</h4>

<p>Our model objects are plain olâ€™ classes and structs. The APIs for reading and writing are main-thread-only, and they call back asynchronously but always on the main thread with a result.</p>

<p>Inside the database code, though, is a serial queue. Itâ€™s completely internal to that code, though, and utterly invisible to the rest of the app.</p>

<p>When the database code sends any notifications, it does so on the main thread. It doesnâ€™t otherwise affect any app state.</p>

<h4 id="use-asserts-and-preconditions">Use Asserts and Preconditions</h4>

<p>If you do a search on <code>Thread.isMainThread</code>, youâ€™ll find a bunch of theseâ€¦</p>

<pre><code>precondition(Thread.isMainThread)
</code></pre>

<p>â€¦andâ€¦</p>

<pre><code>assert(Thread.isMainThread)
</code></pre>

<p>â€¦and one example of <code>XCTAssertTrue(Thread.isMainThread)</code>. We donâ€™t otherwise test if weâ€™re in the main thread.</p>

<p>(I would not mind having a whole lot more of <code>precondition(Thread.isMainThread)</code> than we do now.)</p>

<h4 id="the-result">The Result</h4>

<p>You may be skeptical about this model, but Iâ€™ll remind you that NetNewsWire is responsive and freakishly fast. Itâ€™s also â€” by <em>far</em> â€”Â the most stable and bug-free app Iâ€™ve ever worked on in my long career. And a big part of that is our threading model.</p>

<p>One of the nice things about this model is that a developer knows, just by looking at where they are, what thread the code is running on. Itâ€™s almost always main. But if youâ€™re working on the RSS parser or similar, you know that it literally doesnâ€™t matter, and if youâ€™re working on the database or similar, itâ€™s obvious that youâ€™re using a serial queue.</p>

<p>As we adopt Combine, SwiftUI, and future Swift language changes to support concurrency, we will continue to use this model. The details of our implementation may change, but the model will remain the same: use the main thread everywhere except in a few cases, and make sure that those cases cannot leak knowledge or behavior of their queues outside themselves.</p>

<h4 id="advice">Advice</h4>

<p>Some developers Iâ€™ve known seem to think that being good at concurrency makes them badass. Others seem to think that senior developers must be great at concurrency, and so they should be too.</p>

<p>But what senior developers are good at is eliminating concurrency as much as possible by developing a simple, easy, consistent model to follow for the app and its components.</p>

<p>And this is because concurrency is too difficult for humans to understand and maintain. Maybe you can create a system that makes extensive use of it, and have it be correct for one day. But think of your team! Even if youâ€™re a solo developer, you and you-plus-six-months makes you a team.</p>

<p>I know youâ€™re worried about blocking the main thread. But consider this: itâ€™s way easier to fix a main-thread-blocker than it is to fix a weird, intermittent bug or crash due to threading.</p>

<p>With a main-thread-blocker, use the Time Profiler in Instruments and figure out whatâ€™s going on. It may be that something does need to move to a background serial queue â€”Â or, more likely, thereâ€™s a data structure or algorithm that could be improved, or you find your app is doing unnecessary work (or both).</p>

<h4 id="how-to-get-there-from-where-you-are">How To Get There From Where You Are</h4>

<p>I suspect most apps donâ€™t have a clear model for concurrency. If yours does, then great! Skip the rest of this post. :)</p>

<p>If you want to move to the model Iâ€™ve described above, Iâ€™d start with a few things.</p>

<ul>
  <li>Identify code that should be main-thread-only and use <code>assert(Thread.isMainThread)</code> in that code</li>
  <li>Turn on Xcodeâ€™s Main Thread Checker</li>
  <li>Make sure that every Notification that your app posts is posted on the main thread. In notification handlers, add an <code>assert(Thread.isMainThread)</code></li>
</ul>

<p>If you donâ€™t use Notifications, apply that advice to KVO or whatever else you might be using.</p>

<p>The reason I pick Notifications and KVO is because theyâ€™re a kind of spooky action at a distance â€”Â when youâ€™re working on the Notification handling side, you donâ€™t know what thread the Notification was posted on, and developers tend to assume itâ€™s the main thread. This is a common place for threadedness to leak, which causes bugs and crashes. (Accidental multithreading is the scourge of our platform.)</p>

<p>The next step is probably to look at the places where youâ€™re using queues and find out which of those could be moved to the main thread. And, when you canâ€™t move to main, build better walls: make APIs that call back on the main thread, and donâ€™t let the fact of those queues leak out from behind the API. Donâ€™t let threadedness leak.</p>

<p>You can get there incrementally.</p>

<p>In the meantime you may find that youâ€™re having to dispatch to the main queue rather often as a defensive measure.</p>

<p>Ideally, youâ€™re only dispatching to the main queue when itâ€™s part of this threading model (when posting a notification from a background queue or calling a callback) and never as a defensive measure.</p>

<p>However, it may be a while before your app gets there, and thatâ€™s okay. (Tip: do consider the case where sometimes that call to <code>DispatchQueue.main.async</code> is happening in code already running on the main thread. The async part is real, and you may not always want that: sometimes you may want code to run immediately when already on the main thread. And sometimes not.)</p>

<p>In the end: change all your <code>assert(Thread.isMainThread)</code> to <code>precondition(Thread.isMainThread)</code> â€”Â make your app crash in production when the threading model is violated. Being able to do that â€” knowing that it wonâ€™t ever trip â€” is a great place to be. ğŸ£ğŸ¥ğŸ‰</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/03/17/new_in_netnewswire_6_icloud_syncing>17 Mar 2021</a></div>	
	<h2><a href=https://inessential.com/2021/03/17/new_in_netnewswire_6_icloud_syncing>New in NetNewsWire 6: iCloud Syncing</a></h2>
	<div class=postBody><p>Weâ€™ve added â€”Â in addition to support for a bunch of online RSS systems â€” iCloud syncing in NetNewsWire 6. (Latest beta <a href="https://nnw.ranchero.com/2021/03/16/netnewswire-b-for.html">6.0b3 is recommended</a> at this writing.)</p>

<p>This is great for people who use only NetNewsWire for reading feeds â€”Â it means you donâ€™t need an additional service or login aside from iCloud itself, which youâ€™re almost certainly already using.</p>

<p>Here are some things to knowâ€¦</p>

<h4 id="it-reads-feeds-directly">It Reads Feeds Directly</h4>

<p>An iCloud sync account is like an On My Mac account in that it reads feeds directly from the sources instead of going through a separate RSS system such as Feedbin or Feedly.</p>

<p>Many people prefer this, for privacy reasons â€”Â it means their feeds list isnâ€™t stored on some RSS syncing system.</p>

<p>But some people prefer â€” also for privacy reasons â€”Â <em>not</em> to read feeds directly: they like having a system that goes directly to the sources. This way the sources donâ€™t see their requests.</p>

<p>Consider your own preference when choosing to use iCloud sync or not.</p>

<p>Another issue with this model: you could miss articles in fast-moving feeds. (This is true for both iCloud and On My Mac accounts.)</p>

<p>Imagine a feed that updates a hundred times a day. Say you take a Monday off and donâ€™t launch NetNewsWire on any device. By Tuesday, when you launch NetNewsWire, some of the articles from Monday have already fallen off the feed. Youâ€™ll never see those articles.</p>

<p>If you used an online system you would not miss those, because online systems never take a day off.</p>

<h4 id="it-works-with-netnewswire-only">It Works with NetNewsWire Only</h4>

<p>Other RSS readers include iCloud syncing. But you canâ€™t sync those apps with NetNewsWire via iCloud â€”Â Appleâ€™s CloudKit doesnâ€™t allow for that. Each app gets its own storage, and other apps canâ€™t see that storage. (Which makes sense.)</p>

<p>If you want to use NetNewsWire on one machine and another app on another, youâ€™ll need to choose an RSS syncing system that both apps support. (Which shouldnâ€™t be difficult.)</p>

<h4 id="netnewswire-supports-multiple-accounts">NetNewsWire Supports Multiple Accounts</h4>

<p>This is not new in NetNewsWire 6, but itâ€™s worth pointing out: you can have an iCloud sync account <em>and</em> (for instance) a Feedbin account. NetNewsWire is designed for this, just as Mail is designed for multiple email accounts.</p>

<p>Being able to choose which feeds are synced where is powerful.</p>

<p>But do note that you can have only one iCloud account in NetNewsWire. (Because of how iCloud works.)</p>

<h4 id="it-may-be-slow-at-first">It May Be Slow at First</h4>

<p>NetNewsWire itself is very fast. But syncing happens at the speed of iCloud â€”Â and iCloud sometimes throttles the app: it tells NetNewsWire to back off and try again later.</p>

<p>This can be especially noticeable when youâ€™re just starting off with iCloud in NetNewsWire, or whenever you add a big number of feeds, because there will be a ton of data to upload.</p>

<p>So: be patient right at first and whenever youâ€™re adding a bunch of feeds to your iCloud account.</p>

<h4 id="were-shipping-the-mac-app-before-the-ios-app">Weâ€™re Shipping the Mac App Before the iOS App</h4>

<p>This feature will come to NetNewsWire for iOS too, of course. Our plan is to ship NetNewsWire 6 for Mac first, and then start TestFlight builds for the iOS app, and then ship NetNewsWire 6 for iOS.</p>

<p>The good news: the iCloud sync code is shared between the two apps, which means itâ€™s already getting a thorough test.</p>

<p>You might ask why weâ€™re not shipping Mac and iOS at the same time. Our wonderful, remarkable team of volunteers â€” working during their spare time <em>during a pandemic and multiple other crises</em> â€”Â could have handled shipping both at the same time. But splitting it up this way is my call â€” itâ€™s easier for me personally to manage, and I ask for your understanding. Thanks!</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/03/16/the_hottest_of_all_xcode_tips>16 Mar 2021</a></div>	
	<h2><a href=https://inessential.com/2021/03/16/the_hottest_of_all_xcode_tips>The Hottest of All Xcode Tips</a></h2>
	<div class=postBody><p>Itâ€™s come to my attention that not everyone knows this. But everyone needs to know this.</p>

<p>In Xcodeâ€™s Organizer, in the Crashes section, you can right-click or ctrl-click on any row and choose Show in Finder. This will reveal a .crashpoint file â€”Â do a Show Package Contents and then dig in further. You will find .crash files with the full crash logs, which provide a lot more info than what you see in Organizer.</p>

<p>(Bonus tip: I just drag the .crashpoint package onto BBEdit, which shows the contents in its sidebar, where I can click on different .crash files. I assume other text editors have a similar feature.)</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/03/14/new_in_netnewswire_6_syncing_via_bazqux_>14 Mar 2021</a></div>	
	<h2><a href=https://inessential.com/2021/03/14/new_in_netnewswire_6_syncing_via_bazqux_>New in NetNewsWire 6: Syncing Via BazQux, Inoreader, NewsBlur, The Old Reader, and FreshRSS</a></h2>
	<div class=postBody><p>NetNewsWire 6 â€”Â <a href="https://nnw.ranchero.com/2021/03/13/netnewswire-b-for.html">currently in beta</a> (Mac for now) â€”Â adds support for a bunch of RSS sync systems: BazQux, Inoreader, NewsBlur, The Old Reader, and FreshRSS. (NetNewsWire already supported Feedly and Feedbin: this makes the list a lot longer.)</p>

<p>If youâ€™ve held off on checking out NetNewsWire because you use one of the above, well, you donâ€™t have to wait any more. Unless you want to wait for it to get out of beta, which is completely sensible. ğŸˆ</p>

<p>Not new in NetNewsWire 6, but worth remembering: NetNewsWire supports multiple accounts. You can have Feedly and Inoreader and FreshRSS, for instance. You can even have multiple of each. (Youâ€™d need multiple logins, of course.)</p>

<p>(Weâ€™re getting closer to our goal of supporting as many as possible of the existing systems. While I canâ€™t guarantee weâ€™ll get to every single one, weâ€™re certainly trying.)</p>

<h4 id="how-to-add-an-account">How to add an account</h4>

<p>Open Preferences. Click the Accounts icon. Click the + button near the bottom left of the window. Youâ€™ll see a list of accounts as in <a href="https://netnewswire.com/images/NetNewsWire6-Add-Account.png">this screenshot</a>. Pick the one you want to add, and then follow the prompts for authentication and setup.</p>

<h4 id="bonus-tip">Bonus Tip</h4>

<p>If you find an OPML file somewhere and just want to check it out without adding it to your current feeds, you can use NetNewsWireâ€™s support for multiple accounts. (This is not new in NetNewsWire 6: this works in NetNewsWire 5 too.)</p>

<p>Create a new On My Mac account (you can have more than one) just for this OPML file, and then choose that account when importing the OPML file. That way you can see whatâ€™s in it, and you can copy any feeds you like into another account. When youâ€™re done, you can just delete the temporary account (or make it inactive).</p>

<p>Example: if youâ€™re an iOS developer, you might want to import some of the OPML files at Dave Verwerâ€™s <a href="https://iosdevdirectory.com/">iOS Dev Directory</a>.</p>
</div>
</article>
<article class=post>
	<div class=postDateline><a href=https://inessential.com/2021/03/13/netnewswire_6_twitter_search>13 Mar 2021</a></div>	
	<h2><a href=https://inessential.com/2021/03/13/netnewswire_6_twitter_search>New in NetNewsWire 6: Twitter Search Feeds</a></h2>
	<div class=postBody><p>New in NetNewsWire 6 â€”Â <a href="https://nnw.ranchero.com/2021/03/13/netnewswire-b-for.html">currently in beta</a> (Mac version, for now) â€”Â is the ability to add Twitter searches and read them as if they were any other kind of feed.</p>

<p>Hereâ€™s how:</p>

<p>Open Preferences &gt; Extensions and add your Twitter account. Close the Preferences window.</p>

<p>Then, from the menubar, choose File &gt; New Twitter Feed. In the window that appears, make the type Search, provide a search string, choose an account and folder, then click Add.</p>

<p>(Note: these work with iCloud and On My Mac accounts only. Some of the other syncing servicesÂ support special Twitter feeds too, but you have to set them up via their website.)</p>

<p>Whatâ€™s cool about this: you can watch for mentions of whatever you want, and those come to you in the same app where your other feeds live.</p>

<p>I have a search feed set up for mentions of NetNewsWire, as youâ€™d imagine. <a href="https://netnewswire.com/images/NetNewsWire6-Twitter-Search.png">Hereâ€™s a screenshot</a> of what it looks like in my copy of NetNewsWire. ğŸ£</p>
</div>
</article>


<p><a href=archive>Archive</a></p>

</div>
</main>

<footer>
<p><a href=https://netnewswire.com/>NetNewsWire</a> â€¢ <a href=https://xcoders.org/>Xcoders</a> â€¢ <a href=https://inessential.com/xml/rss.xml>RSS Feed</a> â€¢ <a href=https://inessential.com/feed.json>JSON</a></p>
<p>Â© 1999-2022 Brent Simmons â€¢ Made in Seattle</p>
</footer>

</body>
</html>

